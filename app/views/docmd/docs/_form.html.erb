<% if @doc.errors.any? %>
  <div class="bg-red-50 border border-red-200 text-red-800 px-4 py-3 rounded mb-4">
    <ul class="list-disc list-inside">
      <% @doc.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
    </ul>
  </div>
<% end %>

<div class="space-y-6">
  <div>
    <%= form.label :title, "標題", class: "block text-sm font-medium text-gray-700 mb-1" %>
    <%= form.text_field :title, value: @doc.title, class: "w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500", placeholder: "輸入文件標題" %>
  </div>

  <div>
    <%= form.label :slug, "Slug (網址路徑)", class: "block text-sm font-medium text-gray-700 mb-1" %>
    <%= form.text_field :slug, value: @doc.slug, class: "w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500", placeholder: "例如：my-document (留空會自動產生)" %>
    <p class="mt-1 text-sm text-gray-500">將用於文件的 URL 路徑，只能包含英文字母、數字和橫線</p>
  </div>

  <div>
    <%= form.label :layout, "Layout Template", class: "block text-sm font-medium text-gray-700 mb-1" %>
    <%= form.text_field :layout, value: @doc.metadata&.dig('layout'), class: "w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500", placeholder: "例如：blog、documentation（留空使用預設）" %>
    <p class="mt-1 text-sm text-gray-500">指定要使用的 Rails layout template。留空會使用主應用程式的預設 application layout。</p>
  </div>

  <div>
    <%= form.label :tags, "標籤", class: "block text-sm font-medium text-gray-700 mb-1" %>
    <%= form.text_field :tags, value: @doc.tags&.join(', '), class: "w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500", placeholder: "例如：rails, ruby, tutorial (用逗號分隔)" %>
    <p class="mt-1 text-sm text-gray-500">用逗號分隔多個標籤</p>
  </div>

  <div>
    <%= form.label :roles, "權限角色（需要 rolify gem）", class: "block text-sm font-medium text-gray-700 mb-1" %>
    <%= form.text_field :roles, value: @doc.roles&.join(', '), class: "w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500", placeholder: "例如：admin, editor, member (用逗號分隔，留空表示公開)" %>
    <p class="mt-1 text-sm text-gray-500">設定可以查看此文件的角色。留空表示所有人都可以查看。需要主應用程式安裝 rolify gem。</p>
  </div>

  <div>
    <%= form.label :date, "發布日期", class: "block text-sm font-medium text-gray-700 mb-1" %>
    <%= form.datetime_field :date, value: @doc.date, class: "w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" %>
  </div>

  <div>
    <div class="flex items-center">
      <%= form.check_box :publish, checked: @doc.published?, class: "h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded" %>
      <%= form.label :publish, "發布文件", class: "ml-2 block text-sm text-gray-700" %>
    </div>
    <p class="mt-1 text-sm text-gray-500">勾選後文件將公開顯示</p>
  </div>

  <div>
    <%= form.label :content, "內容 (Markdown)", class: "block text-sm font-medium text-gray-700 mb-1" %>
    <%= form.text_area :content, value: @doc.content, rows: 20, class: "w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 font-mono text-sm", placeholder: "在此輸入 Markdown 格式的內容..." %>
    <p class="mt-1 text-sm text-gray-500">支援完整的 Markdown 語法，包含表格、程式碼區塊、註腳等</p>
  </div>

  <div class="border-t pt-4">
    <details class="cursor-pointer">
      <summary class="font-medium text-gray-700 hover:text-gray-900">Markdown 語法提示</summary>
      <div class="mt-4 bg-gray-50 p-4 rounded-lg text-sm">
        <pre class="whitespace-pre-wrap">
# 標題 1
## 標題 2
### 標題 3

**粗體文字** 或 __粗體文字__
*斜體文字* 或 _斜體文字_
~~刪除線~~

[連結文字](https://example.com)
![圖片替代文字](image.jpg)

- 無序列表項目
- 另一個項目
  - 子項目

1. 有序列表
2. 第二項

> 引用文字

`行內程式碼`

```ruby
# 程式碼區塊
def hello
  puts "Hello, World!"
end
```

| 表格標題 | 另一欄 |
|---------|-------|
| 內容    | 資料   |

---  (分隔線)

註腳參考[^1]
[^1]: 註腳內容
        </pre>
      </div>
    </details>
  </div>
</div>